1. Роли и доступ

Ученик — обычный пользователь (не нужно регистрировать отдельно).
Репетитор — один главный админ (ты). Можно позже добавить помощников/второго репетитора.

2. Основной сценарий записи (самый важный)
   Для ученика:

/start → приветствие + «Записаться на занятие»
Выбор предмета (если у тебя несколько: математика, физика и т.д.)
Календарь на 14–30 дней вперёд (inline-календарь)
Выбор даты → бот показывает только свободные часы по 1 часу (с шагом 60 минут)
Выбор времени → «Записаться на 18:00»
Подтверждение + короткая анкета (один раз):
Имя ребёнка / своё имя
Класс / уровень
Цель занятий (можно пропустить)

Заявка отправляется тебе.

Для тебя:

Мгновенное уведомление в личку:textНовая заявка!
Ученик: Маша Иванова, 8 класс
Предмет: Математика
18 февраля, 18:00–19:00
Причина: подготовка к ОГЭ
Кнопки:
✅ Подтвердить | ✏️ Предложить другое время | ❌ Отклонить

Если ты подтверждаешь → ученику сразу приходит:
text✅ Запись подтверждена!
18 февраля, 18:00–19:00
Ссылка на Zoom/Google Meet (ты можешь задать шаблон)
Напоминание будет за 2 часа и за 30 минут
Если предлагаешь другое время:
Ты выбираешь из своих свободных слотов (или пишешь вручную) → ученику приходит карусель из 3–5 вариантов с кнопками «Выбрать этот слот».
3. Календарь репетитора (самая важная часть)
   Ты один раз в неделю (или раз в месяц) заполняешь свободное время:

Рекуррентные слоты (самое удобное):
Понедельник 15:00–21:00 каждую неделю
Среда 17:00–20:00
Суббота 10:00–14:00

Исключения (одноразовые):
20 февраля — не работаю
25 февраля — только до 18:00


Бот автоматически скрывает занятые и заблокированные слоты.
Дополнительно:

«Буфер» 10–15 минут между занятиями (чтобы ты успевал переключиться)
Максимум N занятий в день (защита от выгорания)

4. Дополнительный функционал (то, что обычно забывают)
   Обязательно добавить:

Автоматические напоминания ученику: за 24 ч, за 2 ч и за 30 мин
Напоминание тебе за 30 минут: «Через 30 мин занятие с Машей Ивановой»
Возможность отмены записи:
Ученик может отменить сам за 24 часа бесплатно
Менее чем за 24 ч — ты решаешь (штраф или перенос)

Перенос занятия (в один клик)
История всех занятий ученика (для тебя и для него)
Повторяющиеся занятия (подписка): «Хочу каждую среду в 18:00» — ты подтверждаешь серию

Очень полезно:

Интеграция с Google Calendar (двусторонняя синхронизация) — многие репетиторы так делают.
Автоматическое создание встречи в Zoom/Google Meet при подтверждении.
Статус оплаты (если берёшь предоплату):
«Оплачено» / «Не оплачено» / ссылка на оплату через ЮKassa/Tinkoff/CloudPayments прямо в боте.


5. Структура меню
   Ученик:

Записаться на занятие
Мои записи
Перенести / отменить
Контакты репетитора
Полезные материалы (можно добавить позже)

Ты (админ):

Календарь (редактировать слоты)
Заявки на сегодня / на неделю
Все ученики (список + карточка)
Статистика (сколько занятий, загрузка по дням)
Настройки (буфер, уведомления и т.д.)

6. Техническая реализация (рекомендую)
   Лучший стек 2026 года для такого бота:

aiogram 3.x (async) — самый быстрый и удобный
База данных: PostgreSQL (или SQLite на старте)
Хостинг: Railway или Render (бесплатно на старте) или VPS за 300–400 руб/мес
Хранение слотов: таблица slots (start_time, end_time, is_booked, pupil_id)
Google Calendar API — легко подключается

Важные моменты реализации:

Все даты и время хранить в UTC, показывать в часовом поясе ученика и твоём.
Защита от двойной записи (race condition) — обязательно использовать транзакции.
Лимит заявок: максимум 3–4 активные заявки от одного ученика.